#!/usr/bin/make -f

export DEB_BUILD_MAINT_OPTIONS = hardening=+all

# examples/Makefile is autogenerated before being shipped; we want to
# make sure it picks a standard shell for reproducibility
export CONFIG_SHELL = /bin/sh

# the build tends to aggressively over-link, this avoids unnecessary dependencies
export DEB_LDFLAGS_MAINT_PREPEND = -Wl,--as-needed

override_dh_autoreconf:
	dh_autoreconf --as-needed

override_dh_auto_configure:
	dh_auto_configure -- \
		--enable-vala \
		--enable-gtk-doc \
		--enable-largefile \
		--enable-introspection

%:
	dh $@ --with=gir
